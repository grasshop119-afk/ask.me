<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ask.me</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            color: #fff; 
            font-family: -apple-system, sans-serif; 
            min-height: 100vh; 
            padding-top: 60px; 
        }
        .header { 
            position: fixed; 
            top: 0; 
            width: 100%; 
            background: #000; 
            padding: 20px 24px; 
            z-index: 100; 
            /* border-bottom: 1px solid #333; УБРАЛ */
        }
        .logo { 
            font-family: 'Montserrat', sans-serif; 
            font-weight: 700; 
            font-size: 24px; 
            color: #fff; 
        }
        .logo-dot, .logo-me { 
            color: #007AFF; /* будет заменен на акцентный цвет Telegram */
        }
        .profile-container { 
            padding: 0 24px; 
            margin-top: 20px; 
            max-width: 480px; 
            margin-left: auto; 
            margin-right: auto; 
        }
        .profile-info { 
            display: flex; 
            align-items: center; 
            gap: 16px; 
            margin-bottom: 32px; 
        }
        .avatar-frame { 
            width: 72px; 
            height: 72px; 
            background: #2C2C2E; 
            border-radius: 50%; 
            flex-shrink: 0; 
            overflow: hidden; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        .avatar-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .user-info { 
            display: flex; 
            flex-direction: column; 
            gap: 2px; 
        }
        .user-name-container { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
        }
        .user-name { 
            font-weight: 700; 
            font-size: 24px; 
        }
        .user-username { 
            font-size: 14px; 
            color: rgba(255,255,255,0.7); 
        }
        .verified-icon { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        .verified-icon img { 
            width: 22px; 
            height: 22px; 
            filter: invert(36%) sepia(90%) saturate(2476%) hue-rotate(200deg) brightness(102%) contrast(101%); 
        }
        .divider {
            width: 100%;
            height: 1px;
            background: #333;
            margin-bottom: 20px;
        }
        .tabs {
            display: flex;
            margin-bottom: 32px;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            font-size: 16px;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            transition: color 0.2s;
        }
        .tab.active {
            color: #fff;
            font-weight: 500;
        }
        .content {
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: rgba(255,255,255,0.5);
            font-size: 16px;
        }
        .sticker-container {
            width: 150px;
            height: 150px;
            margin-bottom: 20px;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght=700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header"><div class="logo">ask<span class="logo-dot">.</span><span class="logo-me">me</span></div></header>
    <div class="profile-container">
        <div class="profile-info">
            <div class="avatar-frame" id="user-avatar">
                <!-- Аватар загрузится через Telegram Web App -->
            </div>
            <div class="user-info">
                <div class="user-name-container">
                    <div class="user-name" id="user-first-name">User</div>
                    <div class="verified-icon">
                        <img src="https://img.icons8.com/?size=100&id=8jOLgduf9aBf&format=png&color=000000" alt="">
                    </div>
                </div>
                <div class="user-username" id="user-username">@user000</div>
            </div>
        </div>

        <div class="divider"></div>

        <div class="tabs">
            <div class="tab active" data-tab="ideas">Идеи</div>
            <div class="tab" data-tab="questions">Вопросы</div>
            <div class="tab" data-tab="answers">Ответы</div>
        </div>

        <div class="content" id="ideas-content">
            <div class="sticker-container" id="sticker-ideas"></div>
            Идей пока нет
        </div>
        <div class="content" id="questions-content" style="display: none;">
            <div class="sticker-container" id="sticker-questions"></div>
            Вопросов еще не задавали
        </div>
        <div class="content" id="answers-content" style="display: none;">
            <div class="sticker-container" id="sticker-answers"></div>
            User пока не отвечал на вопросы
        </div>
    </div>

    <script>
        // Инициализация Telegram Web App
        let tg = window.Telegram.WebApp;
        
        // Расширяем Web App на всю высоту
        tg.expand();
        
        // Получаем акцентный цвет пользователя
        const accentColor = tg.themeParams.accent_color || '#007AFF';
        
        // Применяем акцентный цвет
        document.querySelectorAll('.logo-dot, .logo-me').forEach(el => {
            el.style.color = accentColor;
        });
        
        // Загружаем данные пользователя
        const user = tg.initDataUnsafe.user;
        if (user) {
            // Имя пользователя
            if (user.first_name) {
                document.getElementById('user-first-name').textContent = user.first_name;
            }
            
            // Юзернейм
            if (user.username) {
                document.getElementById('user-username').textContent = '@' + user.username;
            }
            
            // Аватар
            if (user.photo_url) {
                const avatarImg = document.createElement('img');
                avatarImg.src = user.photo_url;
                avatarImg.alt = 'Avatar';
                document.getElementById('user-avatar').appendChild(avatarImg);
            }
        }
        
        // Загружаем стикеры
        function loadSticker(stickerId, containerId) {
            fetch('Stickers/Nothing.json')
                .then(response => response.json())
                .then(data => {
                    lottie.loadAnimation({
                        container: document.getElementById(containerId),
                        renderer: 'svg',
                        loop: true,
                        autoplay: true,
                        animationData: data
                    });
                })
                .catch(error => {
                    console.error('Ошибка загрузки стикера:', error);
                    document.getElementById(containerId).innerHTML = 
                        '<div style="color:white;text-align:center;padding:20px;">Стикер не загружен</div>';
                });
        }
        
        // Загружаем стикеры для всех вкладок
        loadSticker('nothing', 'sticker-ideas');
        loadSticker('nothing', 'sticker-questions');
        loadSticker('nothing', 'sticker-answers');
        
        // Обработка вкладок
        const tabs = document.querySelectorAll('.tab');
        const contents = document.querySelectorAll('.content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Вибрация в Telegram
                if (tg.isVersionAtLeast('6.1')) {
                    tg.HapticFeedback.impactOccurred('light');
                }
                
                // Смена вкладок
                tabs.forEach(t => t.classList.remove('active'));
                contents.forEach(c => c.style.display = 'none');
                
                tab.classList.add('active');
                
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}-content`).style.display = 'flex';
            });
        });
    </script>
</body>
</html>
