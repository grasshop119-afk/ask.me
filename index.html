<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ask.me</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            color: #fff; 
            font-family: -apple-system, sans-serif; 
            min-height: 100vh; 
            padding-top: 70px; 
        }
        .header { 
            position: fixed; 
            top: 0; 
            width: 100%; 
            background: #000; 
            padding: 20px 24px; 
            border-bottom: 1px solid #333; 
            z-index: 100; 
        }
        .logo { 
            font-family: 'Montserrat', sans-serif; 
            font-weight: 700; 
            font-size: 24px; 
            color: #fff; 
        }
        .logo-dot, .logo-me { color: var(--accent-color, #007AFF); }
        .profile-container { 
            padding: 0 24px; 
            margin-top: 40px; 
            max-width: 480px; 
            margin-left: auto; 
            margin-right: auto; 
        }
        .profile-info { 
            display: flex; 
            align-items: center; 
            gap: 16px; 
            margin-bottom: 32px; 
        }
        .avatar-frame { 
            width: 72px; 
            height: 72px; 
            background: #2C2C2E; 
            border-radius: 50%; 
            flex-shrink: 0; 
        }
        .user-info { 
            display: flex; 
            flex-direction: column; 
            gap: 2px; 
        }
        .user-name-container { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
        }
        .user-name { 
            font-weight: 700; 
            font-size: 24px; 
        }
        .user-username { 
            font-size: 14px; 
            color: rgba(255,255,255,0.7); 
        }
        .verified-icon { 
            display: flex; 
            align-items: center; 
        }
        .verified-icon img { 
            width: 22px; 
            height: 22px; 
            filter: var(--icon-filter, invert(36%) sepia(90%) saturate(2476%) hue-rotate(200deg) brightness(102%) contrast(101%));
        }
        .divider {
            width: 100%;
            height: 1px;
            background: #333;
            margin-bottom: 10px;
        }
        .tabs {
            display: flex;
            margin-bottom: 32px;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            font-size: 16px;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
        }
        .tab.active {
            color: var(--accent-color, #fff);
            font-weight: 500;
        }
        .content {
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: rgba(255,255,255,0.5);
            font-size: 16px;
        }
        .sticker-container {
            width: 140px;
            height: 140px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .sticker {
            max-width: 100%;
            max-height: 100%;
            filter: brightness(0.8);
        }
        @keyframes vibrate {
            0% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
            100% { transform: translateX(0); }
        }
        .vibrate {
            animation: vibrate 0.15s ease-in-out;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght=700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header"><div class="logo">ask<span class="logo-dot">.</span><span class="logo-me">me</span></div></header>
    <div class="profile-container">
        <div class="profile-info">
            <div class="avatar-frame"></div>
            <div class="user-info">
                <div class="user-name-container">
                    <div class="user-name">User</div>
                    <div class="verified-icon">
                        <img src="https://img.icons8.com/?size=100&id=8jOLgduf9aBf&format=png&color=000000" alt="">
                    </div>
                </div>
                <div class="user-username">@user000</div>
            </div>
        </div>

        <div class="divider"></div>

        <div class="tabs">
            <div class="tab active">Идеи</div>
            <div class="tab">Вопросы</div>
            <div class="tab">Ответы</div>
        </div>

        <div class="content" id="ideas-content">
            <div class="sticker-container">
                <img class="sticker" src="" alt="Стикер">
            </div>
            Идей пока нет
        </div>
        <div class="content" id="questions-content" style="display: none;">
            <div class="sticker-container">
                <img class="sticker" src="" alt="Стикер">
            </div>
            Вопросов еще не задавали
        </div>
        <div class="content" id="answers-content" style="display: none;">
            <div class="sticker-container">
                <img class="sticker" src="" alt="Стикер">
            </div>
            User пока не отвечал на вопросы
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // Инициализация Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand(); // Раскрываем на весь экран
        tg.enableClosingConfirmation(); // Подтверждение закрытия
        
        // Получаем акцентный цвет пользователя
        const accentColor = tg.themeParams.accent_color || '#007AFF';
        const textColor = tg.themeParams.text_color || '#ffffff';
        
        // Устанавливаем CSS переменные
        document.documentElement.style.setProperty('--accent-color', `#${accentColor.toString(16).padStart(6, '0')}`);
        
        // Фильтр для иконки под акцентный цвет
        const hexToRgb = (hex) => {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `${r}, ${g}, ${b}`;
        };
        
        const rgb = hexToRgb(`#${accentColor.toString(16).padStart(6, '0')}`);
        const iconFilter = `invert(36%) sepia(90%) saturate(2476%) hue-rotate(${parseInt(accentColor.toString(16).substring(0, 2), 16)}deg) brightness(102%) contrast(101%)`;
        document.documentElement.style.setProperty('--icon-filter', iconFilter);
        
        // Загрузка стикера из JSON
        async function loadSticker() {
            try {
                const response = await fetch('Stickers/Nothing.json');
                if (!response.ok) throw new Error('Файл стикера не найден');
                
                const data = await response.json();
                // Предполагаем, что JSON содержит поле с URL стикера
                const stickerUrl = data.sticker_url || data.url || data.file_path;
                
                if (stickerUrl) {
                    const stickers = document.querySelectorAll('.sticker');
                    stickers.forEach(sticker => {
                        sticker.src = stickerUrl;
                    });
                }
            } catch (error) {
                console.log('Не удалось загрузить стикер:', error);
                // Заглушка если стикер не загрузился
                const stickers = document.querySelectorAll('.sticker');
                stickers.forEach(sticker => {
                    sticker.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgdmlld0JveD0iMCAwIDE0MCAxNDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNzAiIGN5PSI3MCIgcj0iNTAiIGZpbGw9IiMzMzMiLz48cGF0aCBkPSJNNzAgNDVWNjBNNzAgODBWNzBNNjAgNjBINzBNODAgNjBINzAiIHN0cm9rZT0iI2NjYyIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L3N2Zz4=';
                });
            }
        }
        
        // Функция вибрации
        function vibrate(element) {
            element.classList.add('vibrate');
            setTimeout(() => {
                element.classList.remove('vibrate');
            }, 150);
        }
        
        // Переключение вкладок
        const tabs = document.querySelectorAll('.tab');
        const contents = document.querySelectorAll('.content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Вибрация при переключении
                vibrate(tab);
                
                tabs.forEach(t => t.classList.remove('active'));
                contents.forEach(c => c.style.display = 'none');
                
                tab.classList.add('active');
                
                if (tab.textContent === 'Идеи') {
                    document.getElementById('ideas-content').style.display = 'flex';
                } else if (tab.textContent === 'Вопросы') {
                    document.getElementById('questions-content').style.display = 'flex';
                } else if (tab.textContent === 'Ответы') {
                    document.getElementById('answers-content').style.display = 'flex';
                }
            });
        });
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', () => {
            loadSticker();
            
            // Если пользователь в Telegram, показываем его данные
            if (tg.initDataUnsafe?.user) {
                const user = tg.initDataUnsafe.user;
                document.querySelector('.user-name').textContent = user.first_name || 'User';
                document.querySelector('.user-username').textContent = `@${user.username || 'user000'}`;
                
                // Можно также загрузить аватар
                // if (user.photo_url) {
                //     document.querySelector('.avatar-frame').style.backgroundImage = `url(${user.photo_url})`;
                //     document.querySelector('.avatar-frame').style.backgroundSize = 'cover';
                // }
            }
        });
    </script>
</body>
</html>
