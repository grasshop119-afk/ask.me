<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ask.me</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            color: #fff; 
            font-family: -apple-system, sans-serif; 
            min-height: 100vh; 
            padding-top: 90px; /* –û–ø—É—Å—Ç–∏–ª–∏ –Ω–∏–∂–µ */
        }
        .header { 
            position: fixed; 
            top: 0; 
            width: 100%; 
            background: #000; 
            padding: 24px 24px 20px;
            z-index: 100; 
            display: flex;
            justify-content: center; /* –õ–æ–≥–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            align-items: center;
        }
        .logo { 
            font-family: 'Montserrat', sans-serif; 
            font-weight: 700; 
            font-size: 24px; 
            color: #fff; 
        }
        .logo-dot, .logo-me, .accent-color { 
            color: #007AFF; /* –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç Telegram */
        }
        .profile-container { 
            padding: 0 24px; 
            max-width: 480px; 
            margin-left: auto; 
            margin-right: auto; 
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - 150px);
        }
        .profile-info { 
            display: flex; 
            align-items: center; 
            gap: 16px; 
            margin-bottom: 40px; /* –£–≤–µ–ª–∏—á–∏–ª–∏ –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        }
        .avatar-frame { 
            width: 64px; /* –ß—É—Ç—å –º–µ–Ω—å—à–µ */
            height: 64px; /* –ß—É—Ç—å –º–µ–Ω—å—à–µ */
            background: #2C2C2E; 
            border-radius: 50%; 
            flex-shrink: 0; 
            overflow: hidden; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        .avatar-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .user-info { 
            display: flex; 
            flex-direction: column; 
            gap: 2px; 
        }
        .user-name-container { 
            display: flex; 
            align-items: center; 
            gap: 8px;
        }
        .user-name { 
            font-weight: 700; 
            font-size: 24px; 
        }
        .user-username { 
            font-size: 14px; 
            color: rgba(255,255,255,0.7); 
        }
        .verified-icon { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        .verified-icon img { 
            width: 22px; 
            height: 22px; 
        }
        .divider {
            width: 100%;
            height: 1px;
            background: #333;
            margin-bottom: 20px;
        }
        .tabs {
            display: flex;
            margin-bottom: 32px;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            font-size: 16px;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            transition: color 0.2s;
        }
        .tab.active {
            color: #007AFF; /* –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ */
        }
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: -40px;
        }
        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: rgba(255,255,255,0.5);
            font-size: 16px;
            text-align: center;
            min-height: 300px;
        }
        .sticker-container {
            width: 150px;
            height: 150px;
            margin-bottom: 20px;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght=700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="logo">ask<span class="logo-dot">.</span><span class="logo-me">me</span></div>
    </header>
    
    <div class="profile-container">
        <div class="profile-info">
            <div class="avatar-frame" id="user-avatar">
                <!-- –ê–≤–∞—Ç–∞—Ä –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ Telegram Web App -->
            </div>
            <div class="user-info">
                <div class="user-name-container">
                    <div class="user-name" id="user-first-name">User</div>
                    <div class="verified-icon" id="verified-icon" style="display: none;">
                        <img src="https://img.icons8.com/?size=100&id=8jOLgduf9aBf&format=png&color=000000" alt="">
                    </div>
                </div>
                <div class="user-username" id="user-username">@user000</div>
            </div>
        </div>

        <div class="divider"></div>

        <div class="tabs">
            <div class="tab active" data-tab="ideas">–ò–¥–µ–∏</div>
            <div class="tab" data-tab="questions">–í–æ–ø—Ä–æ—Å—ã</div>
            <div class="tab" data-tab="answers">–û—Ç–≤–µ—Ç—ã</div>
        </div>

        <div class="content-area">
            <div class="content" id="ideas-content">
                <div class="sticker-container" id="sticker-ideas"></div>
                –ò–¥–µ–π –ø–æ–∫–∞ –Ω–µ—Ç
            </div>
            <div class="content" id="questions-content" style="display: none;">
                <div class="sticker-container" id="sticker-questions"></div>
                –í–æ–ø—Ä–æ—Å–æ–≤ –µ—â–µ –Ω–µ –∑–∞–¥–∞–≤–∞–ª–∏
            </div>
            <div class="content" id="answers-content" style="display: none;">
                <div class="sticker-container" id="sticker-answers"></div>
                <span id="answers-text">User –ø–æ–∫–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–ª –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã</span>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        
        // –†–∞—Å—à–∏—Ä—è–µ–º Web App –Ω–∞ –≤—Å—é –≤—ã—Å–æ—Ç—É
        tg.expand();
        
        // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥)
        let accentColor = '#007AFF'; // —Ü–≤–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        
        // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç
        if (tg.themeParams && tg.themeParams.accent_text_color) {
            accentColor = tg.themeParams.accent_text_color;
        } else if (tg.themeParams && tg.themeParams.button_color) {
            accentColor = tg.themeParams.button_color;
        } else if (tg.initDataUnsafe && tg.initDataUnsafe.start_param) {
            // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±
            try {
                const params = new URLSearchParams(tg.initDataUnsafe.start_param || '');
                if (params.get('accent')) {
                    accentColor = '#' + params.get('accent');
                }
            } catch(e) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ü–≤–µ—Ç –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∞–∫—Ü–µ–Ω—Ç–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
        function applyAccentColor(color) {
            // –õ–æ–≥–æ—Ç–∏–ø
            document.querySelectorAll('.logo-dot, .logo-me').forEach(el => {
                el.style.color = color;
            });
            
            // –ê–∫—Ç–∏–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab.active').forEach(el => {
                el.style.color = color;
            });
            
            // –ò–∫–æ–Ω–∫–∞ –≥–∞–ª–æ—á–∫–∏
            const verifiedIcon = document.querySelector('.verified-icon img');
            if (verifiedIcon) {
                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º hex –≤ RGB
                const r = parseInt(color.slice(1, 3), 16);
                const g = parseInt(color.slice(3, 5), 16);
                const b = parseInt(color.slice(5, 7), 16);
                
                // –°–æ–∑–¥–∞–µ–º —Ñ–∏–ª—å—Ç—Ä –¥–ª—è SVG
                verifiedIcon.style.filter = 
                    `invert(36%) sepia(90%) saturate(2476%) hue-rotate(${getHueFromHex(color)}deg) brightness(102%) contrast(101%)`;
            }
        }
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç —Å—Ä–∞–∑—É
        applyAccentColor(accentColor);
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è hue –∏–∑ hex —Ü–≤–µ—Ç–∞
        function getHueFromHex(hex) {
            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let hue = 0;
            
            if (max === min) {
                hue = 0;
            } else {
                const d = max - min;
                switch (max) {
                    case r: hue = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: hue = (b - r) / d + 2; break;
                    case b: hue = (r - g) / d + 4; break;
                }
                hue /= 6;
            }
            
            return Math.round(hue * 360);
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const user = tg.initDataUnsafe.user;
        if (user) {
            // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (user.first_name) {
                document.getElementById('user-first-name').textContent = user.first_name;
            }
            
            // –Æ–∑–µ—Ä–Ω–µ–π–º
            if (user.username) {
                document.getElementById('user-username').textContent = '@' + user.username;
                
                // –ì–∞–ª–æ—á–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è @ya_admin7
                if (user.username === 'ya_admin7') {
                    document.getElementById('verified-icon').style.display = 'flex';
                }
            }
            
            // –ê–≤–∞—Ç–∞—Ä
            if (user.photo_url) {
                const avatarImg = document.createElement('img');
                avatarImg.src = user.photo_url;
                avatarImg.alt = 'Avatar';
                document.getElementById('user-avatar').appendChild(avatarImg);
            } else {
                // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞
                const avatarPlaceholder = document.createElement('div');
                avatarPlaceholder.style.width = '100%';
                avatarPlaceholder.style.height = '100%';
                avatarPlaceholder.style.backgroundColor = '#2C2C2E';
                avatarPlaceholder.style.display = 'flex';
                avatarPlaceholder.style.alignItems = 'center';
                avatarPlaceholder.style.justifyContent = 'center';
                avatarPlaceholder.style.color = '#8E8E93';
                avatarPlaceholder.style.fontSize = '24px';
                avatarPlaceholder.innerHTML = 'üë§';
                document.getElementById('user-avatar').appendChild(avatarPlaceholder);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ –æ—Ç–≤–µ—Ç–∞—Ö —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const answersText = document.getElementById('answers-text');
            if (answersText && user.first_name) {
                answersText.textContent = `${user.first_name} –ø–æ–∫–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–ª –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã`;
            }
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∏–∫–µ—Ä—ã
        function loadSticker(stickerId, containerId) {
            fetch('Stickers/Nothing.json')
                .then(response => response.json())
                .then(data => {
                    lottie.loadAnimation({
                        container: document.getElementById(containerId),
                        renderer: 'svg',
                        loop: true,
                        autoplay: true,
                        animationData: data
                    });
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–∫–µ—Ä–∞:', error);
                    document.getElementById(containerId).innerHTML = 
                        '<div style="color:rgba(255,255,255,0.3);text-align:center;padding:20px;font-size:48px;">‚óã</div>';
                });
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∏–∫–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
        loadSticker('nothing', 'sticker-ideas');
        loadSticker('nothing', 'sticker-questions');
        loadSticker('nothing', 'sticker-answers');
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∫–ª–∞–¥–æ–∫
        const tabs = document.querySelectorAll('.tab');
        const contents = document.querySelectorAll('.content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // –í–∏–±—Ä–∞—Ü–∏—è –≤ Telegram
                if (tg.isVersionAtLeast('6.1')) {
                    tg.HapticFeedback.impactOccurred('light');
                }
                
                // –°–º–µ–Ω–∞ –≤–∫–ª–∞–¥–æ–∫
                tabs.forEach(t => {
                    t.classList.remove('active');
                    t.style.color = ''; // –°–±—Ä–æ—Å —Ü–≤–µ—Ç–∞
                });
                
                contents.forEach(c => c.style.display = 'none');
                
                tab.classList.add('active');
                tab.style.color = accentColor; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç
                
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}-content`).style.display = 'flex';
            });
        });
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã
        tg.onEvent('themeChanged', function() {
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç
            if (tg.themeParams && tg.themeParams.accent_text_color) {
                accentColor = tg.themeParams.accent_text_color;
                applyAccentColor(accentColor);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏
                document.querySelectorAll('.tab.active').forEach(el => {
                    el.style.color = accentColor;
                });
            }
        });
    </script>
</body>
</html>
