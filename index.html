<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ask.me</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            color: #fff; 
            font-family: -apple-system, sans-serif; 
            min-height: 100vh; 
            padding-top: 100px; /* –£–≤–µ–ª–∏—á–∏–ª–∏ padding-top */
        }
        html, body {
            overflow-x: hidden;
            touch-action: pan-y;
        }
        .header { 
            position: fixed; 
            top: 10px; /* –õ–æ–≥–æ –æ–ø—É—â–µ–Ω–æ –Ω–∞ 10px */
            left: 0;
            width: 100%; 
            background: #000; 
            padding: 20px 24px;
            z-index: 100; 
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .logo { 
            font-family: 'Montserrat', sans-serif; 
            font-weight: 700; 
            font-size: 24px; 
            color: #fff; 
        }
        .logo-dot, .logo-me, .accent-color { 
            color: #007AFF; /* –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç Telegram */
        }
        .profile-container { 
            padding: 0 24px; 
            max-width: 480px; 
            margin-left: auto; 
            margin-right: auto; 
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - 160px);
        }
        .profile-info { 
            display: flex; 
            align-items: center; 
            gap: 16px; 
            margin-bottom: 40px;
        }
        .avatar-frame { 
            width: 64px;
            height: 64px;
            background: #2C2C2E; 
            border-radius: 50%; 
            flex-shrink: 0; 
            overflow: hidden; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        .avatar-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .user-info { 
            display: flex; 
            flex-direction: column; 
            gap: 2px; 
            flex: 1;
        }
        .user-name-container { 
            display: flex; 
            align-items: center; 
            justify-content: space-between; /* –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
            gap: 8px;
        }
        .user-name-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .user-name { 
            font-weight: 700; 
            font-size: 24px; 
        }
        .user-username { 
            font-size: 14px; 
            color: rgba(255,255,255,0.7); 
        }
        .icon-container {
            display: flex;
            align-items: center;
            gap: 12px; /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∏–∫–æ–Ω–∫–∞–º–∏ */
        }
        .verified-icon, .share-icon { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer;
        }
        .verified-icon img, .share-icon img { 
            width: 22px; 
            height: 22px; 
            transition: transform 0.2s;
        }
        .verified-icon img:hover, .share-icon img:hover {
            transform: scale(1.1);
        }
        .divider {
            width: 100%;
            height: 1px;
            background: #333;
            margin-bottom: 20px;
        }
        .tabs {
            display: flex;
            margin-bottom: 32px;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            font-size: 16px;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            transition: color 0.2s;
        }
        .tab.active {
            color: #007AFF;
        }
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: -40px;
        }
        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: rgba(255,255,255,0.5);
            font-size: 16px;
            text-align: center;
            min-height: 300px;
        }
        .sticker-container {
            width: 150px;
            height: 150px;
            margin-bottom: 20px;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(28, 28, 30, 0.95);
            padding: 20px 30px;
            border-radius: 16px;
            z-index: 1000;
            text-align: center;
            display: none;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .notification.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        .notification h3 {
            margin-bottom: 15px;
            font-size: 18px;
        }
        .notification .link {
            background: rgba(255,255,255,0.1);
            padding: 12px;
            border-radius: 10px;
            margin: 15px 0;
            word-break: break-all;
            font-family: monospace;
            font-size: 14px;
        }
        .notification button {
            background: #007AFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght=700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="logo">ask<span class="logo-dot">.</span><span class="logo-me">me</span></div>
    </header>
    
    <div class="profile-container">
        <div class="profile-info">
            <div class="avatar-frame" id="user-avatar">
                <!-- –ê–≤–∞—Ç–∞—Ä –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ Telegram Web App -->
            </div>
            <div class="user-info">
                <div class="user-name-container">
                    <div class="user-name-wrapper">
                        <div class="user-name" id="user-first-name">User</div>
                        <div class="verified-icon" id="verified-icon" style="display: none;">
                            <img src="https://img.icons8.com/?size=100&id=8jOLgduf9aBf&format=png&color=000000" alt="">
                        </div>
                    </div>
                    <div class="icon-container">
                        <div class="share-icon" id="share-icon">
                            <img src="https://img.icons8.com/?size=100&id=AGLXTiVVflkt&format=png&color=000000" alt="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º">
                        </div>
                    </div>
                </div>
                <div class="user-username" id="user-username">@user000</div>
            </div>
        </div>

        <div class="divider"></div>

        <div class="tabs">
            <div class="tab active" data-tab="ideas">–ò–¥–µ–∏</div>
            <div class="tab" data-tab="questions">–í–æ–ø—Ä–æ—Å—ã</div>
            <div class="tab" data-tab="answers">–û—Ç–≤–µ—Ç—ã</div>
        </div>

        <div class="content-area">
            <div class="content" id="ideas-content">
                <div class="sticker-container" id="sticker-ideas"></div>
                –ò–¥–µ–π –ø–æ–∫–∞ –Ω–µ—Ç
            </div>
            <div class="content" id="questions-content" style="display: none;">
                <div class="sticker-container" id="sticker-questions"></div>
                –í–æ–ø—Ä–æ—Å–æ–≤ –µ—â–µ –Ω–µ –∑–∞–¥–∞–≤–∞–ª–∏
            </div>
            <div class="content" id="answers-content" style="display: none;">
                <div class="sticker-container" id="sticker-answers"></div>
                <span id="answers-text">User –ø–æ–∫–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–ª –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã</span>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ —Å—Å—ã–ª–∫–æ–π -->
    <div class="notification" id="link-notification">
        <h3>–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å</h3>
        <div class="link" id="profile-link">–°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É...</div>
        <button id="copy-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
        <button id="close-notification" style="background: rgba(255,255,255,0.1); margin-top: 8px;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        
        // –†–∞—Å—à–∏—Ä—è–µ–º Web App –Ω–∞ –≤—Å—é –≤—ã—Å–æ—Ç—É
        tg.expand();
        
        // –ó–∞–ø—Ä–µ—â–∞–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
        document.addEventListener('touchmove', function(e) {
            if(e.scale !== 1) e.preventDefault();
        }, { passive: false });
        
        // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let accentColor = '#007AFF';
        
        if (tg.themeParams && tg.themeParams.accent_text_color) {
            accentColor = tg.themeParams.accent_text_color;
        } else if (tg.themeParams && tg.themeParams.button_color) {
            accentColor = tg.themeParams.button_color;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∞–∫—Ü–µ–Ω—Ç–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
        function applyAccentColor(color) {
            // –õ–æ–≥–æ—Ç–∏–ø
            document.querySelectorAll('.logo-dot, .logo-me').forEach(el => {
                el.style.color = color;
            });
            
            // –ê–∫—Ç–∏–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab.active').forEach(el => {
                el.style.color = color;
            });
            
            // –ò–∫–æ–Ω–∫–∏
            applyIconColor('.verified-icon img', color);
            applyIconColor('.share-icon img', color);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –∫ –∏–∫–æ–Ω–∫–∞–º
        function applyIconColor(selector, color) {
            const icon = document.querySelector(selector);
            if (icon) {
                icon.style.filter = 
                    `invert(36%) sepia(90%) saturate(2476%) hue-rotate(${getHueFromHex(color)}deg) brightness(102%) contrast(101%)`;
            }
        }
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç —Å—Ä–∞–∑—É
        applyAccentColor(accentColor);
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è hue –∏–∑ hex —Ü–≤–µ—Ç–∞
        function getHueFromHex(hex) {
            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let hue = 0;
            
            if (max === min) {
                hue = 0;
            } else {
                const d = max - min;
                switch (max) {
                    case r: hue = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: hue = (b - r) / d + 2; break;
                    case b: hue = (r - g) / d + 4; break;
                }
                hue /= 6;
            }
            
            return Math.round(hue * 360);
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const user = tg.initDataUnsafe.user;
        let userId = null;
        let username = null;
        
        if (user) {
            userId = user.id;
            
            // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (user.first_name) {
                document.getElementById('user-first-name').textContent = user.first_name;
            }
            
            // –Æ–∑–µ—Ä–Ω–µ–π–º
            if (user.username) {
                username = user.username;
                document.getElementById('user-username').textContent = '@' + username;
                
                // –ì–∞–ª–æ—á–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è @ya_admin7
                if (username === 'ya_admin7') {
                    document.getElementById('verified-icon').style.display = 'flex';
                }
            }
            
            // –ê–≤–∞—Ç–∞—Ä
            if (user.photo_url) {
                const avatarImg = document.createElement('img');
                avatarImg.src = user.photo_url;
                avatarImg.alt = 'Avatar';
                document.getElementById('user-avatar').appendChild(avatarImg);
            } else {
                const avatarPlaceholder = document.createElement('div');
                avatarPlaceholder.style.width = '100%';
                avatarPlaceholder.style.height = '100%';
                avatarPlaceholder.style.backgroundColor = '#2C2C2E';
                avatarPlaceholder.style.display = 'flex';
                avatarPlaceholder.style.alignItems = 'center';
                avatarPlaceholder.style.justifyContent = 'center';
                avatarPlaceholder.style.color = '#8E8E93';
                avatarPlaceholder.style.fontSize = '24px';
                avatarPlaceholder.innerHTML = 'üë§';
                document.getElementById('user-avatar').appendChild(avatarPlaceholder);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ –æ—Ç–≤–µ—Ç–∞—Ö
            const answersText = document.getElementById('answers-text');
            if (answersText && user.first_name) {
                answersText.textContent = `${user.first_name} –ø–æ–∫–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–ª –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã`;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏
        function createProfileLink() {
            let link = 'https://ask.me/';
            
            if (username) {
                link += username;
            } else if (userId) {
                link += 'user/' + userId;
            } else {
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π ID –µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const randomId = Math.random().toString(36).substring(2, 10);
                link += 'anon/' + randomId;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ö—ç—à
            const uniqueHash = Date.now().toString(36) + Math.random().toString(36).substring(2);
            link += '?ref=' + uniqueHash.substring(0, 8);
            
            return link;
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∏–∫–æ–Ω–∫–∏ "–ø–æ–¥–µ–ª–∏—Ç—å—Å—è"
        document.getElementById('share-icon').addEventListener('click', function() {
            // –í–∏–±—Ä–∞—Ü–∏—è
            if (tg.isVersionAtLeast('6.1')) {
                tg.HapticFeedback.impactOccurred('light');
            }
            
            // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É
            const link = createProfileLink();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            document.getElementById('profile-link').textContent = link;
            document.getElementById('link-notification').classList.add('show');
        });
        
        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        document.getElementById('copy-btn').addEventListener('click', function() {
            const link = document.getElementById('profile-link').textContent;
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º Clipboard API
            navigator.clipboard.writeText(link).then(() => {
                // –í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏
                if (tg.isVersionAtLeast('6.1')) {
                    tg.HapticFeedback.notificationOccurred('success');
                }
                
                // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
                const btn = document.getElementById('copy-btn');
                const originalText = btn.textContent;
                btn.textContent = '‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                btn.style.background = '#34C759';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = accentColor;
                }, 2000);
            });
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        document.getElementById('close-notification').addEventListener('click', function() {
            document.getElementById('link-notification').classList.remove('show');
        });
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∏–∫–µ—Ä—ã
        function loadSticker(stickerId, containerId) {
            fetch('Stickers/Nothing.json')
                .then(response => response.json())
                .then(data => {
                    lottie.loadAnimation({
                        container: document.getElementById(containerId),
                        renderer: 'svg',
                        loop: true,
                        autoplay: true,
                        animationData: data
                    });
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–∫–µ—Ä–∞:', error);
                    document.getElementById(containerId).innerHTML = 
                        '<div style="color:rgba(255,255,255,0.3);text-align:center;padding:20px;font-size:48px;">‚óã</div>';
                });
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∏–∫–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
        loadSticker('nothing', 'sticker-ideas');
        loadSticker('nothing', 'sticker-questions');
        loadSticker('nothing', 'sticker-answers');
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∫–ª–∞–¥–æ–∫
        const tabs = document.querySelectorAll('.tab');
        const contents = document.querySelectorAll('.content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // –í–∏–±—Ä–∞—Ü–∏—è –≤ Telegram
                if (tg.isVersionAtLeast('6.1')) {
                    tg.HapticFeedback.impactOccurred('light');
                }
                
                // –°–º–µ–Ω–∞ –≤–∫–ª–∞–¥–æ–∫
                tabs.forEach(t => {
                    t.classList.remove('active');
                    t.style.color = '';
                });
                
                contents.forEach(c => c.style.display = 'none');
                
                tab.classList.add('active');
                tab.style.color = accentColor;
                
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}-content`).style.display = 'flex';
            });
        });
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã
        tg.onEvent('themeChanged', function() {
            if (tg.themeParams && tg.themeParams.accent_text_color) {
                accentColor = tg.themeParams.accent_text_color;
                applyAccentColor(accentColor);
                
                document.querySelectorAll('.tab.active').forEach(el => {
                    el.style.color = accentColor;
                });
            }
        });
    </script>
</body>
</html>
